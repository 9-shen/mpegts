<!DOCTYPE html>
<html>
<head>
	<title>MPEG-TS Parser demo</title>
	<style type="text/css">
		.jsonContainer { color: #733; font-style: italic; word-wrap: break-word; display: block; float: left; width: 45%; margin-right: 2%; overflow-x: scroll; }
		.jsonValue { color: #373; font-weight: bold; font-style: normal; }
	</style>
</head>
<body>
	<video id="video" controls>
		<source id="source" type="video/mp4" />
	</video>

	<script>
		if (true || !('time' in console)) {
			(function () {
				var timeStarts = {}, nowHost = typeof performance !== 'undefined' && 'now' in performance ? performance : Date;
				console.time = function (id) {
					timeStarts[id] = nowHost.now();
				};
				console.timeEnd = function (id) {
					console.log(document.title = id + ': ' + (nowHost.now() - timeStarts[id]) + ' ms');
					delete timeStarts[id];
				};
			})();
		}

		var worker = new Worker('worker.js'), video = document.getElementById('video'), source = document.getElementById('source');
		worker.addEventListener('message', function (event) {
			console.timeEnd('converting');
			video.src = source.src = event.data;
			video.play();
		});
		worker.postMessage('data/sample.ts');
		console.time('converting');
	</script>
</body>
</html>
